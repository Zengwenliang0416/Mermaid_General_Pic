# 开发规范

## 通用规范

### 基本原则
- 使用英文进行代码编写和文档注释
- 遵循 DRY(Don't Repeat Yourself)原则
- 遵循 KISS(Keep It Simple, Stupid)原则
- 遵循 YAGNI(You Aren't Gonna Need It)原则
- 代码提交前进行自测

### 命名规范
- 使用有意义的英文命名,避免拼音和中文
- 避免使用简写(除非是约定俗成的缩写)
- 类名使用 PascalCase
- 变量和函数名使用 camelCase
- 常量使用全大写下划线分隔
- 文件名使用 kebab-case
- 组件名使用 PascalCase

### 注释规范
- 使用 JSDoc 规范注释
- 公共接口必须有注释说明
- 复杂的业务逻辑需要注释说明
- 特殊处理需要注释说明原因
- 临时代码需要注释说明后续处理计划
- 注释要简洁清晰,避免冗余

## 前端开发规范

### Vue 组件规范
- 组件文件以 .vue 结尾
- 组件名称使用 PascalCase
- 组件结构按 template/script/style 顺序
- 组件属性按字母顺序排列
- 使用组合式 API(Composition API)
- 提取可复用的组合式函数
- 组件应职责单一

### TypeScript 规范
- 明确声明类型,避免使用 any
- 使用 interface 定义对象类型
- 使用 type 定义联合类型和交叉类型
- 使用 enum 定义枚举类型
- 合理使用泛型增加代码复用性
- 导出类型定义到 types 目录

### 样式规范
- 使用 SCSS 预处理器
- 遵循 BEM 命名规范
- 避免深层嵌套(不超过3层)
- 使用变量管理主题色
- 响应式布局使用相对单位
- 关键样式添加注释说明

### 状态管理规范
- 按功能模块拆分 store
- 使用 TypeScript 定义 store 类型
- 异步操作使用 actions
- 同步操作使用 mutations
- 派生状态使用 getters
- 避免滥用全局状态

## 后端开发规范

### 代码组织
- 遵循 MVC 架构模式
- 按功能模块组织代码
- 分离业务逻辑和数据访问
- 使用依赖注入管理服务
- 提取公共代码到工具类
- 保持代码结构清晰

### API 设计规范
- 遵循 RESTful 设计原则
- 使用 HTTP 语义化方法
- URL 使用名词复数形式
- 版本号放在 URL 中
- 返回统一的响应格式
- 合理使用 HTTP 状态码

### 错误处理规范
- 使用全局错误处理中间件
- 定义统一的错误类型
- 区分业务错误和系统错误
- 记录详细的错误日志
- 返回友好的错误信息
- 提供错误追踪信息

### 数据库规范
- 使用数据库迁移管理表结构
- 字段名使用下划线命名
- 必要字段添加注释说明
- 合理设计索引提高性能
- 大字段单独建表存储
- 关键操作添加日志记录

## 测试规范

### 单元测试
- 使用 Jest 作为测试框架
- 遵循 AAA(Arrange-Act-Assert)模式
- 每个测试用例只测试一个功能点
- 使用 mock 隔离外部依赖
- 测试覆盖率要求达到 80%
- 测试代码也要保持整洁

### 集成测试
- 测试关键业务流程
- 测试外部服务集成
- 测试数据库操作
- 测试并发场景
- 测试异常情况
- 测试性能指标

### E2E 测试
- 使用 Cypress 进行 E2E 测试
- 测试核心功能流程
- 测试用户交互场景
- 测试浏览器兼容性
- 测试响应式布局
- 测试性能体验

## 版本控制规范

### Git 使用规范
- 遵循 Git Flow 工作流
- 分支命名规范清晰
- 提交信息要有意义
- 及时处理冲突
- 定期同步主分支
- 保持提交粒度合适

### 提交信息格式
```
<type>(<scope>): <subject>

<body>

<footer>
```
- type: feat/fix/docs/style/refactor/test/chore
- scope: 影响范围
- subject: 简短描述
- body: 详细说明
- footer: 不兼容变更/关闭 issue

### 分支管理
- master: 主分支,稳定版本
- develop: 开发分支
- feature/*: 功能分支
- bugfix/*: 修复分支
- release/*: 发布分支
- hotfix/*: 紧急修复分支

## 文档规范

### 文档要求
- README.md 项目说明
- CHANGELOG.md 版本记录
- API 文档及示例
- 架构设计文档
- 部署文档
- 使用文档

### 文档内容
- 文档结构清晰
- 重要信息突出
- 示例代码完整
- 配图简洁清晰
- 步骤说明详细
- 定期更新维护

## 安全规范

### 开发安全
- 遵循安全开发生命周期
- 及时更新依赖版本
- 代码安全审查
- 漏洞扫描
- 渗透测试
- 应急响应预案

### 数据安全
- 敏感数据加密存储
- 传输数据加密
- 访问权限控制
- 数据备份策略
- 日志安全管理
- 数据销毁流程

## 语言切换

- [English Version](../en/development/guidelines.md)
- [中文版本](./guidelines.md) 